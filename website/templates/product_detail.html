{% extends 'base.html' %}
{% load static %}

{% block title %}{{ product.name }} - Jaqman Chemicals{% endblock %}

{% block content %}
<!-- Breadcrumb Navigation -->
<nav class="breadcrumb-nav">
    <div class="container">
        <ol class="breadcrumb-list">
            <li><a href="{{ SITE_BASE_URL }}{% url 'home' %}">Home</a></li>
            <li><a href="{{ SITE_BASE_URL }}{% url 'products' %}">Products</a></li>
            <li class="current">{{ product.name }}</li>
        </ol>
    </div>
</nav>

<!-- Product Hero Section - Premium Design -->
<section class="product-hero-premium">
    <div class="product-hero-bg"></div>
    <div class="container">
        <div class="product-detail-grid-premium">
            <!-- Left Column: Product Image -->
            <div class="product-image-showcase">
                <div class="product-image-wrapper">
                    {% if product.image %}
                    <img src="{{ product.image.url }}" alt="{{ product.name }}" class="product-detail-img">
                    {% else %}
                    <div class="product-detail-img product-placeholder">
                        {{ product.name|slice:":2"|upper }}
                    </div>
                    {% endif %}
                    <div class="product-image-glow"></div>
                </div>

                <!-- Trust Badges -->
                <div class="trust-badges">
                    <div class="trust-badge">
                        <span class="badge-icon">‚úì</span>
                        <span class="badge-text">Quality Assured</span>
                    </div>
                    <div class="trust-badge">
                        <span class="badge-icon">üåç</span>
                        <span class="badge-text">Global Shipping</span>
                    </div>
                    <div class="trust-badge">
                        <span class="badge-icon">üìã</span>
                        <span class="badge-text">COA Available</span>
                    </div>
                </div>
            </div>

            <!-- Right Column: Product Information -->
            <div class="product-info-premium">
                <span class="product-category-badge">üß™ Premium Chemical</span>

                <h1 class="product-title-premium">{{ product.name }}</h1>

                {% if product.purity %}
                <div class="purity-badge-premium">
                    <span class="purity-label">Purity</span>
                    <span class="purity-value">{{ product.purity }}</span>
                </div>
                {% endif %}

                <div class="product-description-block">
                    <h3 class="description-heading">About This Product</h3>
                    <p class="description-text">{{ product.description }}</p>
                </div>

                {% if product.applications %}
                <div class="applications-block">
                    <h4 class="applications-heading">Applications</h4>
                    <div class="applications-tags">
                        {% for app in product.get_applications_list %}
                        <span class="application-tag">{{ app }}</span>
                        {% endfor %}
                    </div>
                </div>
                {% endif %}

                <!-- CTA Buttons -->
                <div class="product-cta-group">
                    <a href="{{ SITE_BASE_URL }}{% url 'contact' %}?product={{ product.name|urlencode }}"
                        class="btn-quote-premium">
                        <span>Request a Quote</span>
                        <span class="btn-icon">‚Üí</span>
                    </a>
                    <a href="{{ SITE_BASE_URL }}{% url 'contact' %}?product={{ product.name|urlencode }}"
                        class="btn-contact-premium">
                        <span>Contact Sales</span>
                    </a>
                </div>

                <!-- Share Buttons -->
                <div class="share-section">
                    <span class="share-label">Share:</span>
                    <div class="share-buttons">
                        <a href="https://wa.me/?text={{ product.name|urlencode }}%20-%20{{ request.build_absolute_uri|urlencode }}"
                            target="_blank" class="share-btn share-whatsapp" title="Share on WhatsApp">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M17.472 14.382c-.297-.149-1.758-.867-2.03-.967-.273-.099-.471-.148-.67.15-.197.297-.767.966-.94 1.164-.173.199-.347.223-.644.075-.297-.15-1.255-.463-2.39-1.475-.883-.788-1.48-1.761-1.653-2.059-.173-.297-.018-.458.13-.606.134-.133.298-.347.446-.52.149-.174.198-.298.298-.497.099-.198.05-.371-.025-.52-.075-.149-.669-1.612-.916-2.207-.242-.579-.487-.5-.669-.51-.173-.008-.371-.01-.57-.01-.198 0-.52.074-.792.372-.272.297-1.04 1.016-1.04 2.479 0 1.462 1.065 2.875 1.213 3.074.149.198 2.096 3.2 5.077 4.487.709.306 1.262.489 1.694.625.712.227 1.36.195 1.871.118.571-.085 1.758-.719 2.006-1.413.248-.694.248-1.289.173-1.413-.074-.124-.272-.198-.57-.347m-5.421 7.403h-.004a9.87 9.87 0 01-5.031-1.378l-.361-.214-3.741.982.998-3.648-.235-.374a9.86 9.86 0 01-1.51-5.26c.001-5.45 4.436-9.884 9.888-9.884 2.64 0 5.122 1.03 6.988 2.898a9.825 9.825 0 012.893 6.994c-.003 5.45-4.437 9.884-9.885 9.884m8.413-18.297A11.815 11.815 0 0012.05 0C5.495 0 .16 5.335.157 11.892c0 2.096.547 4.142 1.588 5.945L.057 24l6.305-1.654a11.882 11.882 0 005.683 1.448h.005c6.554 0 11.89-5.335 11.893-11.893a11.821 11.821 0 00-3.48-8.413z" />
                            </svg>
                        </a>
                        <button class="share-btn share-copy" onclick="copyProductLink()" title="Copy Link">
                            <svg width="18" height="18" viewBox="0 0 24 24" fill="currentColor">
                                <path
                                    d="M16 1H4c-1.1 0-2 .9-2 2v14h2V3h12V1zm3 4H8c-1.1 0-2 .9-2 2v14c0 1.1.9 2 2 2h11c1.1 0 2-.9 2-2V7c0-1.1-.9-2-2-2zm0 16H8V7h11v14z" />
                            </svg>
                            <span class="copy-tooltip">Link copied!</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </div>
</section>

{% if product.specifications %}
<!-- Specifications Section - Premium Table -->
<section class="specs-section-premium">
    <div class="container">
        <div class="specs-header-premium">
            <span class="specs-icon">üìã</span>
            <div class="specs-header-text">
                <h2 class="specs-title-premium">Technical Specifications</h2>
                <p class="specs-subtitle">Detailed product parameters and values</p>
            </div>
        </div>
        <div class="specs-table-premium-wrapper">
            <table class="specs-table-premium">
                <thead>
                    <tr>
                        <th>Parameter</th>
                        <th>Value</th>
                    </tr>
                </thead>
                <tbody>
                    {% for key, value in product.specifications.items %}
                    <tr>
                        <td class="param-cell">{{ key }}</td>
                        <td class="value-cell">{{ value }}</td>
                    </tr>
                    {% endfor %}
                </tbody>
            </table>
        </div>
    </div>
</section>
{% endif %}

<!-- Related Products Section -->
{% if related_products %}
<section class="related-products-section">
    <div class="container">
        <div class="section-header-center">
            <span class="section-badge-sm">üîó Explore More</span>
            <h2 class="section-title-sm">Related Products</h2>
        </div>
        <div class="related-products-grid">
            {% for related in related_products %}
            <a href="{{ SITE_BASE_URL }}{% url 'product_detail' related.slug %}" class="related-product-card">
                <div class="related-product-img">
                    {% if related.image %}
                    <img src="{{ related.image.url }}" alt="{{ related.name }}">
                    {% else %}
                    <div class="related-placeholder">{{ related.name|slice:":2"|upper }}</div>
                    {% endif %}
                </div>
                <div class="related-product-info">
                    <h4 class="related-product-name">{{ related.name }}</h4>
                    {% if related.purity %}
                    <span class="related-purity">{{ related.purity }}</span>
                    {% endif %}
                </div>
            </a>
            {% endfor %}
        </div>
    </div>
</section>
{% endif %}

<!-- CTA Section - Premium -->
<section class="product-cta-section-premium">
    <div class="product-cta-bg"></div>
    <div class="container">
        <div class="cta-content-premium">
            <span class="cta-badge">üíº Get Started</span>
            <h2 class="cta-title-premium">Interested in <span class="accent">{{ product.name }}</span>?</h2>
            <p class="cta-subtitle">Get in touch with our sales team for pricing, availability, and custom requirements.
            </p>
            <div class="cta-buttons-premium">
                <a href="{{ SITE_BASE_URL }}{% url 'contact' %}?product={{ product.name|urlencode }}"
                    class="btn-cta-primary">
                    <span>Request a Quote</span>
                    <span class="btn-icon">‚Üí</span>
                </a>
                <a href="{{ SITE_BASE_URL }}{% url 'contact' %}?product={{ product.name|urlencode }}"
                    class="btn-cta-secondary">
                    Contact Sales Team
                </a>
            </div>
        </div>
    </div>
</section>

<!-- Back Navigation -->
<section class="back-nav-section">
    <div class="container">
        <a href="{{ SITE_BASE_URL }}{% url 'products' %}" class="back-link-premium">
            <span class="back-arrow">‚Üê</span>
            <span>Back to All Products</span>
        </a>
    </div>
</section>
{% endblock %}

{% block extra_js %}
<script>
    function copyProductLink() {
        navigator.clipboard.writeText(window.location.href).then(function () {
            const btn = document.querySelector('.share-copy');
            btn.classList.add('copied');
            setTimeout(() => btn.classList.remove('copied'), 2000);
        });
    }
</script>
{% endblock %}